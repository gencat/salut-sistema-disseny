import{r as q,a as g}from"./lit-element-DhY7bShc.js";import{E as L}from"./lit-html-B2eaWknC.js";import{n as o}from"./property-DnLABHHV.js";import{b}from"./property-types-CkH-zh1n.js";import{e as _}from"./class-map-BDeD7Kfm.js";import{i as w,s as x,u as v}from"./static-B9bHPl91.js";import{g as k}from"./custom-element-scope-Dp4Dg8bo.js";import{c as C}from"./popper-CMBiYTiD.js";/**
 * @license
 * Copyright 2018 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const T=e=>e??L,f=w`dss-calendar${x(k())}`,y=w`dss-icon${x(k())}`,U=e=>{var r,a;const t={"dss-input-group--focused":((r=e._input)==null?void 0:r.value)||e._placeholder||e._isFocused,"dss-input-group--lg":e._inputSize==="lg","dss-input-group--md":e._inputSize==="md","dss-input-group--invalid":e._invalid||!e._inputValidity,"dss-input-group--required":e._required,"dss-input-group--disabled":e._disabled,"dss-input-group--read-only":e._readonly,"dss-input-group--no-label":!e._labelSlot},s={"dss-datepicker-help--invalid":e._invalid||!e._inputValidity,"dss-datepicker-help--disabled":e._disabled},i={"dss-calendar":!0,"dss-calendar--visible":e._showCalendar&&!e._readonly,"dss-calendar--disabled":e._disabled,"dss-calendar--md":e._inputSize==="md"};return v`
    <div class="dss-datepicker">
      <div
        class="dss-input-group dss-input-group--has-icon ${_(t)}"
        role="combobox"
        aria-controls="datepicker-calendar"
        aria-expanded=${T(e._showCalendar)}
      >
        <${y} class="dss-input-icon" size="md" icon="${e._icon}"></${y}>

        <slot
          name="input"
          @click=${e._handleClick}
          @input=${e._handleInput}
          @focusin=${e._handleFocus}
          @focusout=${e._handleBlur}
          @keydown=${e._handleKeyUp}
        ></slot>

        <slot name="label" @click=${e._focusInput}></slot>
      </div>
      ${e._helpText?v`
            <div class="dss-datepicker-help ${_(s)}">
              ${e._helpText}
            </div>
          `:null}
      <${f}
        role="listbox"
        aria-label="Datepicker Calendar"
        id="datepicker-calendar"
        class="${_(i)}"
        .selectedDate=${(a=e._input)==null?void 0:a.value}
        .showTime=${e._showTime}
        .showButtons=${e._showButtons}
        .leftLabel=${e._leftLabel}
        .rightLabel=${e._rightLabel}
        .minDate=${e._minDate}
        .maxDate=${e._maxDate}
        timepickerLabel=${e._timepickerLabel}
        .timepicker=${e._timepicker}
        .customTimeListOptions=${e._customTimeListOptions}
        .minutesRange=${e._minutesRange}
        .minHour=${e._minHour}
        .maxHour=${e._maxHour}
        @onDateChange=${e._onDateChange}
        @onCancel=${e._onCancel}
      ></${f}>
    </div>
  `},V="*{scrollbar-width:thin;scrollbar-color:var(--color-neutral-100) var(--color-white)}*::-webkit-scrollbar{width:6px}*::-webkit-scrollbar-track{background:var(--color-white);border-radius:128px}*::-webkit-scrollbar-thumb{background-color:var(--color-neutral-100);border-radius:128px}",z='.dss-input-group{position:relative;font-family:var(--font-family)}.dss-input-group--md{height:40px}.dss-input-group--lg{height:48px}.dss-input-group--has-icon ::slotted(label),.dss-input-group--has-icon .dss-input-label{left:calc(var(--dss-spacing-sm) + 24px + var(--dss-spacing-xs))}.dss-input-group--has-icon .dss-input-icon{display:block}.dss-input-group--has-icon ::slotted(input),.dss-input-group--has-icon .dss-input{padding-left:calc(var(--dss-spacing-sm) + 24px + var(--dss-spacing-xs))!important}.dss-input-group--numeric ::slotted(input),.dss-input-group--numeric .dss-input{padding-right:calc(var(--dss-spacing-sm) + 24px + var(--dss-spacing-xs))!important}.dss-input-group--dropdown ::slotted(input),.dss-input-group--dropdown .dss-input{padding-right:calc(var(--dss-spacing-sm) + 24px + var(--dss-spacing-xxs))!important}.dss-input-group--disabled{cursor:not-allowed}.dss-input-group--disabled ::slotted(label),.dss-input-group--disabled .dss-input-label,.dss-input-group--disabled .dss-input-icon{color:var(--color-neutral-500)}.dss-input-group--required ::slotted(label):before,.dss-input-group--required .dss-input-label:before{content:"*"}.dss-input-group--invalid ::slotted(label),.dss-input-group--invalid .dss-input-label,.dss-input-group--invalid .dss-input-icon{color:var(--color-red-500)}.dss-input-group--invalid ::slotted(input){background-color:var(--color-red-50);border-color:var(--color-red-500)}.dss-input-group--invalid ::slotted(input:focus-visible){background-color:var(--color-white)}::slotted(input),.dss-input{position:relative;box-sizing:border-box;height:100%;width:100%;min-width:200px;font-size:14px;font-family:inherit;color:var(--color-neutral-900);background-color:var(--color-white);border-radius:var(--dss-radius-sm);border:var(--dss-border-width-sm) solid var(--color-neutral-100);padding-top:var(--dss-spacing-md)!important;padding-right:var(--dss-spacing-sm)!important;padding-bottom:var(--dss-spacing-xxs)!important;padding-left:var(--dss-spacing-sm)!important;z-index:100;text-overflow:ellipsis;white-space:nowrap;overflow:hidden}::slotted(input::-moz-placeholder),.dss-input::-moz-placeholder{color:var(--color-neutral-600);opacity:0;-moz-transition:opacity .5s;transition:opacity .5s}::slotted(input::placeholder),.dss-input::placeholder{color:var(--color-neutral-600);opacity:0;transition:opacity .5s}::slotted(input:focus-visible),.dss-input:focus-visible{border-color:var(--color-blue-200);outline:var(--dss-border-width-lg) solid var(--color-blue-200)}::slotted(input:disabled),.dss-input:disabled{cursor:not-allowed;background-color:var(--color-neutral-50);color:var(--color-neutral-500)}.dss-input-group--invalid .dss-input:not(:focus-visible){background-color:var(--color-red-50);border-color:var(--color-red-500)}::slotted(input:invalid:not(:empty)),::slotted(input.ng-invalid:not(:empty)),.dss-input:invalid:not(:empty){background-color:var(--color-red-50);border-color:var(--color-red-500)}.dss-input-group--read-only ::slotted(input),.dss-input-group--read-only .dss-input{border-top:0;border-left:0;border-right:0;border-radius:0}::slotted(label),.dss-input-label{cursor:inherit;position:absolute;top:calc(50% - 12px);left:var(--dss-spacing-sm);z-index:200;font-size:14px;font-family:inherit;color:var(--color-neutral-600);transition:top .3s;-moz-transition:top .3s;-webkit-transition:top .3s;-o-transition:top .3s;max-height:24px;text-overflow:ellipsis;white-space:nowrap;overflow:hidden;width:calc(100% - var(--dss-spacing-lg))}.dss-input-group--has-icon ::slotted(label){width:calc(100% - var(--dss-spacing-xhg))}.dss-input-group--dropdown ::slotted(label){width:calc(100% - var(--dss-spacing-hg))}.dss-input-group--numeric ::slotted(label){width:calc(100% - var(--dss-spacing-hg))}.dss-input-group--has-icon.dss-input-group--numeric ::slotted(label),.dss-input-group--has-icon.dss-input-group--dropdown ::slotted(label){width:calc(100% - var(--dss-spacing-xxhg))}.dss-input-group--actions ::slotted(label){width:calc(100% - var(--dss-spacing-xhg))}.dss-input-group--actions.dss-input-group--numeric ::slotted(label){width:calc(100% - var(--dss-spacing-xxhg))}.dss-input-group--has-icon.dss-input-group--actions ::slotted(label){width:calc(100% - 96px)}.dss-input-group--has-icon.dss-input-group--actions.dss-input-group--numeric ::slotted(label){width:calc(100% - 112px)}.dss-input-group--actions.dss-input-group--has-secondary-action ::slotted(label){width:calc(100% - 112px)}.dss-input-group--has-icon.dss-input-group--actions.dss-input-group--has-secondary-action ::slotted(label){width:calc(100% - 144px)}.dss-input-icon{display:none;position:absolute;top:calc(50% - 12px);left:var(--dss-spacing-sm);color:var(--color-neutral-700);z-index:200}.dss-input-group--focused ::slotted(label),.dss-input-group--focused .dss-input-label{font-size:12px}.dss-input-group--md.dss-input-group--focused ::slotted(label),.dss-input-group--md.dss-input-group--focused .dss-input-label{top:0}.dss-input-group--lg.dss-input-group--focused ::slotted(label),.dss-input-group--lg.dss-input-group--focused .dss-input-label{top:var(--dss-spacing-tiny)}.dss-input-group--focused .dss-input::-moz-placeholder{opacity:1}.dss-input-group--focused .dss-input::placeholder{opacity:1}.dss-input-help{display:flex;justify-content:space-between;font-family:var(--font-family);font-size:12px;color:var(--color-neutral-700);padding:var(--dss-spacing-xxs) var(--dss-spacing-sm)}.dss-input-help--disabled{color:var(--color-neutral-500)}.dss-input-help--invalid{color:var(--color-red-500)}.dss-input__numeric-buttons{position:absolute;top:0;right:0;z-index:300;padding:0 var(--dss-spacing-sm);display:flex;flex-direction:column;justify-content:center;transition:all .3s ease-in;height:100%}.dss-input__numeric-buttons .dss-icon-button{display:flex;justify-content:center;text-align:center;width:18px;height:18px;align-items:center;font-size:16px}.dss-input-group--no-min-width ::slotted(input){min-width:0}.dss-input-group--no-label ::slotted(input),.dss-input-group--no-label .dss-input{padding-top:var(--dss-spacing-xxs)!important}',H=".dss-datepicker-help{font-family:var(--font-family)}.dss-datepicker-help{font-family:inherit;font-size:12px;color:var(--color-neutral-700);padding:var(--dss-spacing-xxs) var(--dss-spacing-sm)}.dss-datepicker-help--disabled{color:var(--color-neutral-500)}.dss-datepicker-help--invalid{color:var(--color-red-500)}.dss-calendar{z-index:999;width:-moz-fit-content;width:fit-content;opacity:0;visibility:hidden}.dss-calendar--visible{opacity:1;visibility:visible}";var A=Object.defineProperty,O=Object.getOwnPropertyDescriptor,l=(e,t,s,i)=>{for(var r=i>1?void 0:i?O(t,s):t,a=e.length-1,d;a>=0;a--)(d=e[a])&&(r=(i?d(t,s,r):d(r))||r);return i&&r&&A(t,s,r),r};class n extends q{constructor(){super(...arguments),this.dropdownPlacement="bottom-start",this._timepickerLabel="Seleccionar l'hora",this._timepicker="",this._minutesRange=1,this._minHour=0,this._maxHour=24,this._customTimeListOptions=[],this._icon="calendar_today",this._placeholder="",this._externalPlaceholder="",this._previousDate="",this._minDate="",this._maxDate="",this._showCalendar=!1,this._showTime=!1,this._invalid=!1,this._showButtons=!1,this._required=!1,this._disabled=!1,this._readonly=!1,this._leftLabel="Cancel·lar",this._rightLabel="Seleccionar",this._isFocused=!1,this._helpText="",this._inputSize="lg",this._inputValidity=!0,this._popperInstance=null,this.observerConfig={attributes:!0,childList:!0,subtree:!0},this.callback=t=>{for(const s of t)s.type==="attributes"&&(this._checkInputAttributes(),this.requestUpdate())},this.observer=new MutationObserver(this.callback),this.visibleObserver=new IntersectionObserver(([t])=>{var s,i;t.isIntersecting||this._showCalendar&&(this._placeholder="",(s=this._input)==null||s.removeAttribute("placeholder"),this._showCalendar=!1,this._isFocused=!1,(i=this._input)==null||i.blur(),this.requestUpdate())},{root:null,threshold:0})}static get styles(){return[g(z),g(V),g(H)]}get _input(){var s;const t=((s=this.shadowRoot)==null?void 0:s.querySelector('slot[name="input"]'))||void 0;return this.requestUpdate(),t==null?void 0:t.assignedElements()[0]}get _labelSlot(){var s;const t=((s=this.shadowRoot)==null?void 0:s.querySelector('slot[name="label"]'))||void 0;return t==null?void 0:t.assignedElements()[0]}get _label(){var s;const t=((s=this.shadowRoot)==null?void 0:s.querySelector('slot[name="label"]'))||void 0;return this.requestUpdate(),t==null?void 0:t.assignedElements()[0]}set showTime(t){const s=this._showTime;this._showTime=t,this._showButtons=!0,this.requestUpdate("showTime",s)}get showTime(){return this._showTime}set showButtons(t){const s=this._showButtons;this._showButtons=t,this.requestUpdate("showButtons",s)}get showButtons(){return this._showButtons}set leftLabel(t){const s=this._leftLabel;this._leftLabel=t,this.requestUpdate("leftLabel",s)}get leftLabel(){return this._leftLabel}set rightLabel(t){const s=this._rightLabel;this._rightLabel=t,this.requestUpdate("rightLabel",s)}get rightLabel(){return this._rightLabel}set minDate(t){const s=this._minDate;this._minDate=t,this.requestUpdate("minDate",s)}get minDate(){return this._minDate}set maxDate(t){const s=this._maxDate;this._maxDate=t,this.requestUpdate("maxDate",s)}get maxDate(){return this._maxDate}set invalid(t){const s=this._invalid;this._invalid=t,this.requestUpdate("invalid",s)}get invalid(){return this._invalid}set inputSize(t){const s=this._inputSize;t==="md"?this._inputSize=t:this._inputSize="lg",this.requestUpdate("inputSize",s)}get inputSize(){return this._inputSize}set helpText(t){const s=this._helpText;this._helpText=t,this.requestUpdate("helpText",s)}get helpText(){return this._helpText}set timepicker(t){const s=this._timepicker;this._timepicker=t,this.requestUpdate("timepicker",s)}get timepicker(){return this._timepicker}set minutesRange(t){const s=this._minutesRange;this._minutesRange=t,this.requestUpdate("minutesRange",s)}get minutesRange(){return this._minutesRange}set minHour(t){const s=this._minHour;this._minHour=t,this.requestUpdate("minHour",s)}get minHour(){return this._minHour}set maxHour(t){const s=this._maxHour;this._maxHour=t,this.requestUpdate("maxHour",s)}get maxHour(){return this._maxHour}set customTimeListOptions(t){const s=this._customTimeListOptions;this._customTimeListOptions=t,this.requestUpdate("customTimeListOptions",s)}get customTimeListOptions(){return this._customTimeListOptions}set timepickerLabel(t){const s=this._timepickerLabel;this._timepickerLabel=t,this.requestUpdate("timepickerLabel",s)}get timepickerLabel(){return this._timepickerLabel}set value(t){t!==void 0&&this.requestUpdate()}get value(){var t;return(t=this._input)==null?void 0:t.value}set icon(t){const s=this._icon;this._icon=t,this.requestUpdate("icon",s)}get icon(){return this._icon}disconnectedCallback(){this.observer.disconnect(),this.visibleObserver.disconnect()}async firstUpdated(){try{await this.updateComplete,this._createPopperCalendar(),this._input&&(this._checkInputAttributes(),this.observer.observe(this._input,this.observerConfig),this.visibleObserver.observe(this._input)),this._closeDropdown(),this.requestUpdate()}catch{console.error("ERROR OCURRED")}}_createPopperCalendar(){var i,r;const t=(i=this.shadowRoot)==null?void 0:i.querySelector(".dss-input-group"),s=(r=this.shadowRoot)==null?void 0:r.querySelector(".dss-calendar");t&&s&&(this._popperInstance=C(t,s,{placement:this.dropdownPlacement,modifiers:[{name:"offset",options:{offset:[0,4]}}]}))}_checkInputAttributes(){var a,d,u,p,h,c;const t=(a=this._input)==null?void 0:a.getAttribute("placeholder");t&&(this._placeholder=t,this._externalPlaceholder=t);const s=(d=this._input)==null?void 0:d.getAttribute("readonly");this._readonly=s!==null;const i=(u=this._input)==null?void 0:u.getAttribute("disabled");this._disabled=i!==null;const r=(p=this._input)==null?void 0:p.getAttribute("required");this._required=r!==null,(h=this._input)!=null&&h.value&&((c=this._input)==null?void 0:c.value)!==""&&this._handleValidity(),this.requestUpdate()}_handleValidity(){var s;const t=(s=this._input)==null?void 0:s.checkValidity();t!==void 0&&(this._inputValidity=t)}_closeDropdown(){document.addEventListener("click",t=>{var s;t.composedPath().includes(this)||this._showCalendar&&(this._placeholder="",(s=this._input)==null||s.removeAttribute("placeholder"),this._isFocused=!1,this._showCalendar=!1,this.requestUpdate())}),this.addEventListener("focusout",t=>{var i;const s=t.relatedTarget;s!==null&&s!==this&&s!==this._input&&s!==this._label&&this._showCalendar&&((i=this._input)==null||i.removeAttribute("placeholder"),this._placeholder="",this._isFocused=!1,this._showCalendar=!1,this.requestUpdate())})}_handleKeyUp(t){var s,i,r,a,d;if((t==null?void 0:t.key)==="Tab"?(this._isFocused=!0,this._handleBlur()):(t==null?void 0:t.key)==="Enter"||(t==null?void 0:t.key)===" "?(this._showCalendar=!0,this._popperInstance.update(),this._handleBlur()):(t==null?void 0:t.key)==="Escape"&&(this._isFocused=!0,this._showCalendar=!1,this._handleBlur()),t.key==="Enter"&&this._input&&((s=this._input.value)==null?void 0:s.length)>7&&this._input){const u=(i=this._input.value)==null?void 0:i.replace(/(\d+[/])(\d+[/])/,"$2$1"),p=new Date(u),h=(r=p.getDate())==null?void 0:r.toString().padStart(2,"0"),c=(p.getMonth()+1).toString().padStart(2,"0"),$=p.getFullYear(),S=(a=p.getHours())==null?void 0:a.toString().padStart(2,"0"),D=(d=p.getMinutes())==null?void 0:d.toString().padStart(2,"0");let m=`${h}/${c}/${$}`;this._showTime&&(m+=` ${S}:${D}`,this._handleValidity()),this._input&&(this._input.value=m),this._dispatchValueChange(),this.requestUpdate()}}_handleInput(t){var i;const s=(i=t.target.value)==null?void 0:i.replace(/\D/g,"");this._input&&(this._input.value=this._formatDate(s),this._handleValidity()),this._dispatchValueChange(),this.requestUpdate()}_formatDate(t){let s=t.substring(0,2),i=t.substring(2,4);const r=t.substring(4,8);let a=t.substring(8,10),d=t.substring(10,12);Number(s)>3&&(s=s==null?void 0:s.padStart(2,"0")),Number(i)>1&&(i=i==null?void 0:i.padStart(2,"0")),Number(s)>31&&(s="31"),Number(i)>12&&(i="12"),i==="02"&&Number(s)>28&&(r==null?void 0:r.length)===4&&(s=new Date(Number(r),1,29).getMonth()===1?"29":"28");let u=`${s}${i?`/${i}`:""}${r?`/${r}`:""}`;return this._showTime&&(Number(a)>2&&(a=a==null?void 0:a.padStart(2,"0")),Number(a)>23&&(a="23"),Number(d)>5&&(d=d==null?void 0:d.padStart(2,"0")),u=`${u}${a?` ${a}`:""}${d?`:${d}`:""}`),u}_handleFocus(){var t;this._readonly||(this._externalPlaceholder!==""?this._placeholder=this._externalPlaceholder:this._placeholder=this._showTime?"DD/MM/AAAA HH:MM":"DD/MM/AAAA",(t=this._input)==null||t.setAttribute("placeholder",this._placeholder),this.requestUpdate())}_handleBlur(){this.requestUpdate()}_focusInput(){var t;!this._disabled&&!this._readonly&&((t=this._input)==null||t.focus(),this._handleClick())}_handleClick(){this._showCalendar=!0,this._popperInstance.update(),this.requestUpdate()}_onDateChange(t){var i;const s=t.detail;this._input&&(this._input.value=s,this._handleValidity()),(i=this._input)==null||i.removeAttribute("placeholder"),this._placeholder="",this._isFocused=!1,this._showCalendar=!1,this._dispatchValueChange(),this.requestUpdate()}_onCancel(){var t;(t=this._input)==null||t.removeAttribute("placeholder"),this._placeholder="",this._isFocused=!1,this._showCalendar=!1,this._input&&(this._input.value=this._previousDate||"",this._handleValidity()),this.requestUpdate()}_dispatchValueChange(){var s;const t={detail:(s=this._input)==null?void 0:s.value,bubbles:!0,composed:!0};this.dispatchEvent(new CustomEvent("onValueChange",t))}render(){return U(this)}}l([o(b)],n.prototype,"showTime",1);l([o(b)],n.prototype,"showButtons",1);l([o({type:String})],n.prototype,"leftLabel",1);l([o({type:String})],n.prototype,"rightLabel",1);l([o({type:String})],n.prototype,"minDate",1);l([o({type:String})],n.prototype,"maxDate",1);l([o(b)],n.prototype,"invalid",1);l([o({type:String})],n.prototype,"inputSize",1);l([o({type:String})],n.prototype,"helpText",1);l([o({type:String})],n.prototype,"timepicker",1);l([o({type:Number})],n.prototype,"minutesRange",1);l([o({type:Number})],n.prototype,"minHour",1);l([o({type:Number})],n.prototype,"maxHour",1);l([o({type:Array})],n.prototype,"customTimeListOptions",1);l([o({type:String})],n.prototype,"timepickerLabel",1);l([o({type:String})],n.prototype,"value",1);l([o({type:String})],n.prototype,"icon",1);l([o({type:String})],n.prototype,"dropdownPlacement",2);export{n as D,z as i,T as o,V as s};
